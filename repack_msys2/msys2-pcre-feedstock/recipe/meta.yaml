# This file was generated by gen-conda-repack-recipe
# using the MSYS2 package epoch: Mar 02 2024 06:00:00 UTC
#
# Any edits will be overwritten
#
# https://github.com/msys2/MSYS2-packages/blob/master/pcre/PKGBUILD
{% set pkgname = "pcre" %}
{% set pkgver = "8.45" %}
{% set pkgrel = "4" %}
{% set build_number = pkgrel|int * 1000 + 0 %}

package:
  name: repack_msys2-pcre
  version: {{ pkgver }}

source:
  - url: https://repo.msys2.org/msys/x86_64/pcre-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-pcre
    sha256: 651d72cef535757419fd85d78051de72d16d488fd59151cda5cb32ef76cbf092
  - url: https://repo.msys2.org/msys/x86_64/libpcre-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libpcre
    sha256: 6b36968294f7c37e2814c6a6e6552b69eba6d6fd0138ab6a9e7491d65374e794
  - url: https://repo.msys2.org/msys/x86_64/libpcre16-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libpcre16
    sha256: 025288e642b6fd2b6b96d4006408661afbc514e785a811b7cc6f4c7bfe71b556
  - url: https://repo.msys2.org/msys/x86_64/libpcre32-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libpcre32
    sha256: 59221ac014cd8187c839c2000a872b1025abf10ec1fc67da031075ccfaa0c042
  - url: https://repo.msys2.org/msys/x86_64/libpcrecpp-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libpcrecpp
    sha256: 281df4e4e0d396d5a50bc60f5c47abdaab47ee0d6ce4e4736a92fa0cef163e26
  - url: https://repo.msys2.org/msys/x86_64/libpcreposix-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libpcreposix
    sha256: c5635891cacba4f8f412e1197da71ed493f9fa3572234cfdbc9682d4f034a2f5
  - url: https://repo.msys2.org/msys/x86_64/pcre-devel-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-pcre-devel
    sha256: 7f86239e9da618e0e99f099202038b92a2079c7868d6364035675c446091ca29

build:
  number: {{ build_number }}
  binary_relocation: false
  detect_binary_files_with_prefix: false
  skip: True             # [not win]

outputs:
  - name: msys2-pcre
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-bz2-1.dll                              # [win]
        - $RPATH/msys-pcre-1.dll                             # [win]
        - $RPATH/msys-pcre16-0.dll                           # [win]
        - $RPATH/msys-pcre32-0.dll                           # [win]
        - $RPATH/msys-pcreposix-0.dll                        # [win]
        - $RPATH/msys-readline8.dll                          # [win]
        - $RPATH/msys-z.dll                                  # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libreadline                        >=8.2.010    # libreadline
        - msys2-libbz2                             >=1.0.8      # libbz2
        - msys2-zlib                               >=1.3.1      # zlib
        - msys2-libpcre                            >=8.45       # libpcre
        - msys2-libpcre16                          >=8.45       # libpcre16
        - msys2-libpcre32                          >=8.45       # libpcre32
        - msys2-libpcrecpp                         >=8.45       # libpcrecpp
        - msys2-libpcreposix                       >=8.45       # libpcreposix
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/pcregrep.exe                           # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\pcregrep.exe EXIT /B 1           # [win]
        - pcregrep --help                                                        # [win and x86_64]
        - pcretest --help                                                        # [win and x86_64]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages pcre for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-libpcre
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-pcre-1.dll                        # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-pcre-1.dll EXIT /B 1        # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages libpcre for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-libpcre16
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-pcre16-0.dll                      # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-pcre16-0.dll EXIT /B 1      # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages libpcre16 for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-libpcre32
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-pcre32-0.dll                      # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-pcre32-0.dll EXIT /B 1      # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages libpcre32 for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-libpcrecpp
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-gcc_s-seh-1.dll                        # [win]
        - $RPATH/msys-pcre-1.dll                             # [win]
        - $RPATH/msys-stdc++-6.dll                           # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libpcre                            >=8.45       # libpcre
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-pcrecpp-0.dll                     # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-pcrecpp-0.dll EXIT /B 1     # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages libpcrecpp for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-libpcreposix
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-pcre-1.dll                             # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libpcre                            >=8.45       # libpcre
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-pcreposix-0.dll                   # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-pcreposix-0.dll EXIT /B 1   # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages libpcreposix for MSYS]"
      license: "BSD-3-Clause"
  - name: msys2-pcre-devel
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libpcre                             =8.45       # libpcre=8.45
        - msys2-libpcre16                           =8.45       # libpcre16=8.45
        - msys2-libpcre32                           =8.45       # libpcre32=8.45
        - msys2-libpcreposix                        =8.45       # libpcreposix=8.45
        - msys2-libpcrecpp                          =8.45       # libpcrecpp=8.45
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/pcre-config                            # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\pcre-config EXIT /B 1            # [win]
    about:
      home: https://www.pcre.org/
      summary: "A library that implements Perl 5-style regular expressions [repack of MSYS2-packages pcre-devel for MSYS]"
      license: "BSD-3-Clause"
