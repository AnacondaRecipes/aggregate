# This file was generated by gen-conda-repack-recipe
# using the MSYS2 package epoch: Mar 02 2024 06:00:00 UTC
#
# Any edits will be overwritten
#
# https://github.com/msys2/MSYS2-packages/blob/master/gettext/PKGBUILD
{% set pkgname = "gettext" %}
{% set pkgver = "0.22.4" %}
{% set pkgrel = "1" %}
{% set build_number = pkgrel|int * 1000 + 0 %}

package:
  name: repack_msys2-gettext
  version: {{ pkgver }}

source:
  - url: https://repo.msys2.org/msys/x86_64/gettext-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-gettext
    sha256: e84993c8e679bd663acdcceeea2ab47ac49e8e11641fee5fc6e621309de8df22
  - url: https://repo.msys2.org/msys/x86_64/gettext-devel-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-gettext-devel
    sha256: 0b3f08be5546d57ab1897d75d84aa6588897d0026772a9cddea38dad0cee1b7c
  - url: https://repo.msys2.org/msys/x86_64/libgettextpo-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libgettextpo
    sha256: dbdce66eb160fade4430cfbea7bb30af37e283ff82d2e42e8bcf7d7d46d66cdd
  - url: https://repo.msys2.org/msys/x86_64/libasprintf-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libasprintf
    sha256: 2c711ecdd75ce33b811294b8aa4f5e57ddab3b4ba050bc3f18d4dc3f2277094f
  - url: https://repo.msys2.org/msys/x86_64/libintl-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libintl
    sha256: 4d7efc165142e31498accbe52e5bae9bdba6ff9496aab72d78d66d22c0fe1185

build:
  number: {{ build_number }}
  binary_relocation: false
  detect_binary_files_with_prefix: false
  skip: True             # [not win]

outputs:
  - name: msys2-gettext
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-gettextlib-0-22-4.dll                  # [win]
        - $RPATH/msys-gettextsrc-0-22-4.dll                  # [win]
        - $RPATH/msys-iconv-2.dll                            # [win]
        - $RPATH/msys-intl-8.dll                             # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libintl                            >=0.22.4     # libintl
        - msys2-libgettextpo                       >=0.22.4     # libgettextpo
        - msys2-libasprintf                        >=0.22.4     # libasprintf
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
        - msys2-libiconv                           >=1.17       # msys-iconv-2.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/autopoint                              # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\autopoint EXIT /B 1              # [win]
        - envsubst --help                                                        # [win and x86_64]
        - gettext --help                                                         # [win and x86_64]
        - msgattrib --help                                                       # [win and x86_64]
        - msgcat --help                                                          # [win and x86_64]
        - msgcmp --help                                                          # [win and x86_64]
        - msgcomm --help                                                         # [win and x86_64]
        - msgconv --help                                                         # [win and x86_64]
        - msgen --help                                                           # [win and x86_64]
        - msgexec --help                                                         # [win and x86_64]
        - msgfilter --help                                                       # [win and x86_64]
        - msgfmt --help                                                          # [win and x86_64]
        - msggrep --help                                                         # [win and x86_64]
        - msginit --help                                                         # [win and x86_64]
        - msgmerge --help                                                        # [win and x86_64]
        - msgunfmt --help                                                        # [win and x86_64]
        - msguniq --help                                                         # [win and x86_64]
        - ngettext --help                                                        # [win and x86_64]
        - recode-sr-latin --help                                                 # [win and x86_64]
        - xgettext --help                                                        # [win and x86_64]
    about:
      home: https://www.gnu.org/software/gettext/
      summary: "GNU internationalization library [repack of MSYS2-packages gettext for MSYS]"
      license: "GPL-3.0-or-later AND LGPL-2.1-or-later"
  - name: msys2-gettext-devel
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gettext                             =0.22.4     # gettext=0.22.4
        - msys2-libiconv-devel                     >=1.17       # libiconv-devel
    test:
      commands:
        - test -f $PREFIX/Library/usr/include/autosprintf.h                      # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\include\autosprintf.h EXIT /B 1      # [win]
    about:
      home: https://www.gnu.org/software/gettext/
      summary: "GNU internationalization library [repack of MSYS2-packages gettext-devel for MSYS]"
      license: "GPL-3.0-or-later AND LGPL-2.1-or-later"
  - name: msys2-libgettextpo
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-iconv-2.dll                            # [win]
        - $RPATH/msys-intl-8.dll                             # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
        - msys2-libiconv                           >=1.17       # msys-iconv-2.dll
        - msys2-libintl                            >=0.22.4     # msys-intl-8.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-gettextpo-0.dll                   # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-gettextpo-0.dll EXIT /B 1   # [win]
    about:
      home: https://www.gnu.org/software/gettext/
      summary: "GNU internationalization library [repack of MSYS2-packages libgettextpo for MSYS]"
      license: "GPL-3.0-or-later AND LGPL-2.1-or-later"
  - name: msys2-libasprintf
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-stdc++-6.dll                           # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-asprintf-0.dll                    # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-asprintf-0.dll EXIT /B 1    # [win]
    about:
      home: https://www.gnu.org/software/gettext/
      summary: "GNU internationalization library [repack of MSYS2-packages libasprintf for MSYS]"
      license: "GPL-3.0-or-later AND LGPL-2.1-or-later"
  - name: msys2-libintl
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-iconv-2.dll                            # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-gcc-libs                           >=13.2.0     # gcc-libs
        - msys2-libiconv                           >=1.17       # libiconv
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-intl-8.dll                        # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-intl-8.dll EXIT /B 1        # [win]
    about:
      home: https://www.gnu.org/software/gettext/
      summary: "GNU internationalization library [repack of MSYS2-packages libintl for MSYS]"
      license: "GPL-3.0-or-later AND LGPL-2.1-or-later"
