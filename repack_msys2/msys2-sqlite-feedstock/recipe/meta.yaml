# This file was generated by gen-conda-repack-recipe
# using the MSYS2 package epoch: Mar 02 2024 06:00:00 UTC
#
# Any edits will be overwritten
#
# https://github.com/msys2/MSYS2-packages/blob/master/sqlite/PKGBUILD
{% set pkgname = "sqlite" %}
{% set pkgver = "3.45.1" %}
{% set pkgrel = "1" %}
{% set build_number = pkgrel|int * 1000 + 0 %}

package:
  name: repack_msys2-sqlite
  version: {{ pkgver }}

source:
  - url: https://repo.msys2.org/msys/x86_64/sqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite
    sha256: 52690b18db95b287e7fb64a1ccae5a39cb5efbbe6caeb7d7b6c0a0f7e1436904
  - url: https://repo.msys2.org/msys/x86_64/libsqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libsqlite
    sha256: 893003b9fe4b32fa86e287cbede936c2d82fb13c8a0bfe3fdd816b94229c9c24
  - url: https://repo.msys2.org/msys/x86_64/libsqlite-devel-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libsqlite-devel
    sha256: 0bb34d94c702cc86db2fd72c7b38ddfb69e38ac8ab726725340cf3f69046398d
  - url: https://repo.msys2.org/msys/x86_64/sqlite-doc-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite-doc
    sha256: 40b93bd4e322f9a67c7efaec37d17ade183c53782388726c76aeb2e814e13643
  - url: https://repo.msys2.org/msys/x86_64/tcl-sqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-tcl-sqlite
    sha256: 1936b2f7c465b2e9bf30c65b2c6dcb3f2500486857a3ec52ab6d447b2d7833ba
  - url: https://repo.msys2.org/msys/x86_64/sqlite-extensions-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite-extensions
    sha256: f5beab86e11be77e3577e195125075a1dc75fa7c0ee1794289f5427c0bb72f3a
  - url: https://repo.msys2.org/msys/x86_64/lemon-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-lemon
    sha256: c2a6ec2faeed04ea233610e6d008dfad8981ed8d6484bac0b04e5c3699905fa1

build:
  number: {{ build_number }}
  binary_relocation: false
  detect_binary_files_with_prefix: false
  skip: True             # [not win]

outputs:
  - name: msys2-sqlite
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/libtcl8.6.dll                               # [win]
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-readline8.dll                          # [win]
        - $RPATH/msys-z.dll                                  # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libreadline                        >=8.2.010    # libreadline
        - msys2-zlib                               >=1.3.1      # zlib
        - msys2-tcl                                >=8.6.12     # tcl
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/dbhash.exe                             # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\dbhash.exe EXIT /B 1             # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages sqlite for MSYS]"
      license: "PublicDomain"
  - name: msys2-libsqlite
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-sqlite3-0.dll                     # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-sqlite3-0.dll EXIT /B 1     # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages libsqlite for MSYS]"
      license: "PublicDomain"
  - name: msys2-libsqlite-devel
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libsqlite                           =3.45.1     # libsqlite=3.45.1
        - msys2-zlib-devel                         >=1.3.1      # zlib-devel
    test:
      commands:
        - test -f $PREFIX/Library/usr/include/sqlite3.h                          # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\include\sqlite3.h EXIT /B 1          # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages libsqlite-devel for MSYS]"
      license: "PublicDomain"
  - name: msys2-sqlite-doc
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
    test:
      commands:
        - test -f $PREFIX/Library/usr/share/doc/sqlite/34to35.html               # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\share\doc\sqlite\34to35.html EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages sqlite-doc for MSYS]"
      license: "PublicDomain"
  - name: msys2-tcl-sqlite
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-sqlite3-0.dll                          # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libsqlite                           =3.45.1     # libsqlite=3.45.1
        - msys2-tcl                                >=8.6.12     # tcl
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/lib/tcl8.6/sqlite3/msys-tclsqlite3.dll     # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\lib\tcl8.6\sqlite3\msys-tclsqlite3.dll EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages tcl-sqlite for MSYS]"
      license: "PublicDomain"
  - name: msys2-sqlite-extensions
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-sqlite3-0.dll                          # [win]
        - $RPATH/msys-z.dll                                  # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-sqlite                              =3.45.1     # sqlite=3.45.1
        - msys2-libsqlite                           =3.45.1     # libsqlite=3.45.1
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
        - msys2-zlib                               >=1.3.1      # msys-z.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-sqlite3amatch-0.dll               # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-sqlite3amatch-0.dll EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages sqlite-extensions for MSYS]"
      license: "PublicDomain"
  - name: msys2-lemon
    skip: True          # [not (win and x86_64)]
    script: repack.sh   # [unix]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-msys2-runtime                      >=3.4.10     # msys-2.0.dll
    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/lemon.exe                              # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\lemon.exe EXIT /B 1              # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine [repack of MSYS2-packages lemon for MSYS]"
      license: "PublicDomain"
