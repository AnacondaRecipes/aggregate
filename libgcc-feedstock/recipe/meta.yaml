# On macOS this package takes parts from gcc
# On Linux it is just a metapackage to the
# new cross-compiler runtime libs with some
# symlinks so the old filenames find the new
# libraries

{% set gcc_linux_ver = '7.1.0' %}
{% set gcc_macos_ver = '4.8.5' %}

package:
  name: libgcc
  version: {{ gcc_linux_ver }}  [linux]
  version: {{ gcc_macos_ver }}  [osx]

requirements:
  build:
    - libgcc_linux-64 >={{ gcc_linux_ver }}       [linux]
    - libgfortran_linux-64 >={{ gcc_linux_ver }}  [linux]
    - libstdcxx_linux-64 >={{ gcc_linux_ver }}    [linux]
    - gcc >={{ gcc_macos_ver }}                   [osx]
  run:
    - libgcc_linux-64 >={{ gcc_linux_ver }}       [linux]
    - libgfortran_linux-64 >={{ gcc_linux_ver }}  [linux]
    - libstdcxx_linux-64 >={{ gcc_linux_ver }}    [linux]
    - libgfortran >= 4.8.5 >={{ gcc_macos_ver }}  [osx]

build:
  number: 10  [osx]
  number: 0   [linux]
  always_include_files:
    - lib/libstdc++.6.dylib        [osx]
    - lib/libstdc++.dylib          [osx]

about:
  home: http://gcc.gnu.org/
  summary: Shared libraries for the GNU Compiler Collection
  license: GNU GPL 3+ with GCC Runtime Library
  license_family: GPL
